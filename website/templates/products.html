{% extends 'master.html' %}
{% load static %}
{% block title %}محصولات | {% endblock %}
{% load jalali_tags %}


	{% block content %}
		<!-- MainContent -->
			<div class="container mx-auto p-4 md:flex gap-6">
				<!-- sideBar -->
					<aside class="w-full md:w-1/4 bg-gray-100 p-4 rounded-lg mb-6">
					    
					    <!-- sideBarSlider -->
					    	<div class="mb-6">
							  <h2 class="text-lg font-bold mb-2 flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M14 4.4375C15.3462 4.4375 16.4375 3.34619 16.4375 2H17.5625C17.5625 3.34619 18.6538 4.4375 20 4.4375V5.5625C18.6538 5.5625 17.5625 6.65381 17.5625 8H16.4375C16.4375 6.65381 15.3462 5.5625 14 5.5625V4.4375ZM1 11C4.31371 11 7 8.31371 7 5H9C9 8.31371 11.6863 11 15 11V13C11.6863 13 9 15.6863 9 19H7C7 15.6863 4.31371 13 1 13V11ZM4.87601 12C6.18717 12.7276 7.27243 13.8128 8 15.124 8.72757 13.8128 9.81283 12.7276 11.124 12 9.81283 11.2724 8.72757 10.1872 8 8.87601 7.27243 10.1872 6.18717 11.2724 4.87601 12ZM17.25 14C17.25 15.7949 15.7949 17.25 14 17.25V18.75C15.7949 18.75 17.25 20.2051 17.25 22H18.75C18.75 20.2051 20.2051 18.75 22 18.75V17.25C20.2051 17.25 18.75 15.7949 18.75 14H17.25Z"></path></svg>محصولات ویژه</h2>
							  <div class="swiper relative" style="border-radius: 10px;">
							    <div class="swiper-wrapper">
							      <!-- Slide 1 -->
							      {% for sp in special_products %}
								      <div class="swiper-slide">
								        <a href="{% url 'product_detail' sp.slug %}" class="block relative rounded-lg overflow-hidden shadow-lg">
								          <img src="{{ sp.image.url }}" alt="{{ sp.title }}" class="w-full h-full object-cover">
								          <div class="absolute bottom-0 left-0 right-0 bg-white/40 backdrop-blur-md text-center py-2">
								            <span class="font-medium text-gray-800 pr-5">{{ sp.title }}</span>
								          </div>
								        </a>
								      </div>
								  {% endfor %}

							    </div>

							    <!-- دکمه‌های ناوبری -->
							    <div class="swiper-button-next"></div>
							    <div class="swiper-button-prev"></div>
							  </div>
							</div>
							<script>
								const swiper = new Swiper(".swiper", {
							    loop: true,               // چرخش بی‌نهایت
							    slidesPerView: 1,         // تعداد اسلاید در هر ردیف
							    spaceBetween: 20,         // فاصله بین اسلایدها
							    autoplay: {
							      delay: 3000,            // هر 3 ثانیه اسلاید عوض شود
							      disableOnInteraction: false, // بعد از کلیک روی دکمه هم اتومات ادامه یابد
							    },
							    navigation: {
							      nextEl: ".swiper-button-next",
							      prevEl: ".swiper-button-prev",
							    },
							    breakpoints: {            // ریسپانسیو
							      0: { slidesPerView: 1 },      // موبایل
							      640: { slidesPerView: 1 },    // تبلت کوچک
							      1024: { slidesPerView: 1 },   // دسکتاپ
							    },
							  });
							</script>
					    <!-- /sideBarSlider -->
					    <ul class="menu space-y-2 bg-base-200 text-base-content w-full mt-6">
						    <li>
						        <details>
						        	<summary><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19 20H5V21C5 21.5523 4.55228 22 4 22H3C2.44772 22 2 21.5523 2 21V13.5L0.757464 13.1894C0.312297 13.0781 0 12.6781 0 12.2192V11.5C0 11.2239 0.223858 11 0.5 11H2L4.4805 5.21216C4.79566 4.47679 5.51874 4 6.31879 4H17.6812C18.4813 4 19.2043 4.47679 19.5195 5.21216L22 11H23.5C23.7761 11 24 11.2239 24 11.5V12.2192C24 12.6781 23.6877 13.0781 23.2425 13.1894L22 13.5V21C22 21.5523 21.5523 22 21 22H20C19.4477 22 19 21.5523 19 21V20ZM20 18V13H4V18H20ZM5.47703 11H18.523C18.6502 11 18.7762 10.9757 18.8944 10.9285C19.4071 10.7234 19.6566 10.1414 19.4514 9.62861L18 6H6L4.54856 9.62861C4.50131 9.74673 4.47703 9.87278 4.47703 10C4.47703 10.5523 4.92475 11 5.47703 11ZM5 14C7.31672 14 8.87868 14.7548 9.68588 16.2643L9.68582 16.2643C9.81602 16.5078 9.72418 16.8107 9.4807 16.9409C9.40818 16.9797 9.3272 17 9.24496 17H6C5.44772 17 5 16.5523 5 16V14ZM19 14V16C19 16.5523 18.5523 17 18 17H14.755C14.6728 17 14.5918 16.9797 14.5193 16.9409C14.2758 16.8107 14.184 16.5078 14.3142 16.2643L14.3141 16.2643C15.1213 14.7548 16.6833 14 19 14Z"></path></svg>  دسته بندی خودروها
						        	</summary>
							        <ul class="bg-base-100 rounded-t-none p-2 grid grid-cols-3 gap-2">
							            {% for cat in categories %}
											<li><a href="{% url 'category_product' cat.slug %}">{{ cat.name }}</a></li>
										{% endfor %}
							        </ul>
						        </details>
						    </li>
					    </ul>
					</aside>
				<!-- /sideBar -->

				
				<main class="w-full md:w-3/4">
				    <!-- نوار مرتب سازی -->
				    <div class="flex flex-wrap justify-between items-center mb-4 bg-white p-2 rounded shadow">
				      <h2 class="text-xl font-bold flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22" fill="currentColor"><path d="M10 18H14V16H10V18ZM3 6V8H21V6H3ZM6 13H18V11H6V13Z"></path></svg>مرتب‌سازی</h2>
				      <div class="dropdown gap-2">
				      	<div tabindex="0" role="button" class="btn m-1">
				      		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19 20H5V21C5 21.5523 4.55228 22 4 22H3C2.44772 22 2 21.5523 2 21V13.5L0.757464 13.1894C0.312297 13.0781 0 12.6781 0 12.2192V11.5C0 11.2239 0.223858 11 0.5 11H2L4.4805 5.21216C4.79566 4.47679 5.51874 4 6.31879 4H17.6812C18.4813 4 19.2043 4.47679 19.5195 5.21216L22 11H23.5C23.7761 11 24 11.2239 24 11.5V12.2192C24 12.6781 23.6877 13.0781 23.2425 13.1894L22 13.5V21C22 21.5523 21.5523 22 21 22H20C19.4477 22 19 21.5523 19 21V20ZM20 18V13H4V18H20ZM5.47703 11H18.523C18.6502 11 18.7762 10.9757 18.8944 10.9285C19.4071 10.7234 19.6566 10.1414 19.4514 9.62861L18 6H6L4.54856 9.62861C4.50131 9.74673 4.47703 9.87278 4.47703 10C4.47703 10.5523 4.92475 11 5.47703 11ZM5 14C7.31672 14 8.87868 14.7548 9.68588 16.2643L9.68582 16.2643C9.81602 16.5078 9.72418 16.8107 9.4807 16.9409C9.40818 16.9797 9.3272 17 9.24496 17H6C5.44772 17 5 16.5523 5 16V14ZM19 14V16C19 16.5523 18.5523 17 18 17H14.755C14.6728 17 14.5918 16.9797 14.5193 16.9409C14.2758 16.8107 14.184 16.5078 14.3142 16.2643L14.3141 16.2643C15.1213 14.7548 16.6833 14 19 14Z"></path></svg>  انتخاب خودرو
				      	</div>
				      	<ul tabindex="-1" class="dropdown-content menu bg-base-100 rounded-box z-1 w-52 p-2 shadow-sm">
						    {% for cat in categories %}
								<li><a href="{% url 'category_product' cat.slug %}">{{ cat.name }}</a></li>
							{% endfor %}
						</ul>
				      	<!-- <ul class="menu space-y-2 bg-base-200 text-base-content btn btn-md btn-outline w-full mt-6">
						    <li>
						        <details>
						        	<summary>
						        	</summary>
							        <ul class="bg-base-100 rounded-t-none p-2 grid grid-cols-2 gap-2">
							            
							        </ul>
						        </details>
						    </li>
					    </ul> -->
				        <!-- <a href="" class="btn btn-md btn-outline">جدیدترین‌ها</a>
				        <a href="" class="btn btn-md btn-outline">گران‌ترین</a>
				        <a href="" class="btn btn-md btn-outline">ارزان‌ترین</a> -->
				      </div>
				    </div>

				    <!-- محصولات -->
				    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">					
						{% for product in page_obj %}
					      	<div class="card bg-base-100 shadow-md p-1 rounded">
						      <figure>
						        <img src="{{ product.image.url }}" alt="{{ product.title }}" class="rounded">
						      </figure>
						      <div class="card-body text-center p-1">
						        <h3 class="card-title">{{ product.title }}</h3>
						        <div class="flex gap-1 mt-2">
						        	<p class="text-lg text-neutral font-semibold flex">تومان  {{ product.price }}</p>
						        </div>
						        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 card-actions justify-center mt-2">
						          <a href="{% url 'product_detail' product.slug %}" class="btn btn-md btn-warning bg-[#e66700] text-[#fff]">نمایش محصول</a>
						          <a href="" class="btn btn-md btn-success">خرید</a>
						        </div>
						      </div>
						    </div>
						{% endfor %}

				    </div>
				    <!-- pagination -->
				    	<div class="w-full bg-base-200 py-4">
						  <div class="flex justify-center">
						    <div class="join">
								{% if page_obj.has_previous %}
							      	<a href="?page={{ page_obj.previous_page_number }}" class="join-item btn hover-pagination"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M10.0858 12L5.29289 16.7929L6.70711 18.2071L12.9142 12L6.70711 5.79291L5.29289 7.20712L10.0858 12ZM17 6.00002L17 18H15L15 6.00002L17 6.00002Z"></path></svg>قبلی</a>
							    {% endif %}

						    	{% for num in page_obj.paginator.page_range %}
							      {% if num == page_obj.number %}
							      	<a class="join-item btn hover-pagination active-pagination">{{ num }}</a>
							      {% else %}
							        <a href="?page={{ num }}" class="join-item btn hover-pagination">{{ num }}</a>
							      {% endif %}
							    {% endfor %}
						      
						    	<button class="join-item btn btn-disabled">...</button>
						      <!-- <button class="join-item btn hover-pagination">3</button>
						      <button class="join-item btn btn-disabled">...</button>
						      <button class="join-item btn hover-pagination">9</button>
						      <button class="join-item btn hover-pagination">10</button> -->
						    	{% if page_obj.has_next %}
							      <a href="?page={{ page_obj.next_page_number }}" class="join-item btn hover-pagination">بعدی<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M13.9142 12L18.7071 7.20712L17.2929 5.79291L11.0858 12L17.2929 18.2071L18.7071 16.7929L13.9142 12ZM7 18V6.00001H9V18H7Z"></path></svg></a>
							    {% endif %}
						      
						      <button class="join-item btn hover-pagination">بعدی<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M13.9142 12L18.7071 7.20712L17.2929 5.79291L11.0858 12L17.2929 18.2071L18.7071 16.7929L13.9142 12ZM7 18V6.00001H9V18H7Z"></path></svg></button>
						    </div>
						  </div>
						</div>
				    <!-- /pagination -->
				</main>
			</div>
		<!-- /MainContent -->
	{% endblock %}

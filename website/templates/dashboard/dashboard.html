{% load static %}
{% block title %} میز مدیریت فریس {% endblock %}
{% load jalali_tags %}
  {% block content %}
    <div class="flex min-h-screen bg-gray-50">
      <!-- منو -->
      <aside class="w-64 bg-white border-l border-gray-200 shadow-lg p-4">
        <h2 class="text-xl font-bold text-[#e66700] mb-4">مدیریت سایت</h2>
        <ul class="space-y-2">
          <li><button class="btn w-full" onclick="loadSection('products')">محصولات</button></li>
          <li><button class="btn w-full" onclick="loadSection('articles')">مقالات</button></li>
          <li><button class="btn w-full" onclick="loadSection('categories')">دسته‌بندی‌ها</button></li>
        </ul>
      </aside>

      <!-- محتوای اصلی -->
      <main id="dashboard-content" class="flex-1 p-6 overflow-y-auto">
        <h1 class="text-2xl font-bold mb-4">به داشبورد خوش آمدید</h1>
        <p>از منوی سمت راست یکی از بخش‌ها را انتخاب کنید.</p>
      </main>
    </div>

    <script>
    async function loadSection(section) {
      const content = document.getElementById("dashboard-content");
      content.innerHTML = `
        <div class="flex justify-center items-center h-64">
          <span class="loading loading-spinner loading-lg text-[#e66700]"></span>
        </div>`;

      try {
        const res = await fetch(`/dashboard/load/${section}/`);
        const data = await res.json();
        content.innerHTML = data.html;
      } catch (err) {
        content.innerHTML = `<div class="alert alert-error">خطا در بارگذاری بخش.</div>`;
      }
    }
    </script>
  {% endblock %}
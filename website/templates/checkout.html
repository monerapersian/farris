{% extends 'master.html' %}
{% load static %}
{% block title %} ูุฑู ุฎุฑุฏ | {% endblock %}
{% load jalali_tags %}


	{% block content %}
		<!-- MainContent -->
			<div class="bg-base-200 min-h-screen flex items-center justify-center py-10">
				<div class="card w-full max-w-3xl bg-base-100 shadow-2xl p-6">
				    <h2 class="flex text-2xl font-bold text-center mb-6 text-[#e66700]">
				    	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M5 18.89H6.41421L15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89ZM21 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L9.24264 18.89H21V20.89ZM15.7279 6.74785L17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785Z"></path></svg>
				    ุชฺฉูู ุงุทูุงุนุงุช ุณูุงุฑุด 
					</h2>

				    <!-- ูุฑู ุงุทูุงุนุงุช -->
				    <form class="space-y-4">
				      <!-- ูุงู ู ูุงู ุฎุงููุงุฏฺฏ -->
				      <div class="form-control">
				        <label class="label">
				          <span class="label-text font-semibold mb-1">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</span>
				        </label>
				        <input id="full_name" type="text" name="full_name" title="ููุท ุญุฑูู ูุฌุงุฒ ูุณุชูุฏ." pattern="^[ุข-a-zA-Z\s]+$" placeholder="ูุซูุงู: ุนู ุฑุถุง" class="input input-bordered w-full input-primary border-gray-300" />
				      </div>

				      <!-- ุดูุงุฑู ุชููู -->
				      <div class="form-control">
				        <label class="label">
				          <span class="label-text font-semibold mb-1">ุดูุงุฑู ุชููู</span>
				        </label>
				        <input id="phone" type="tel" name="phone" placeholder="ูุซูุงู: 09123456789" required pattern="^0\d{10}$" title="ุดูุงุฑู ุจุงุฏ ฑฑ ุฑูู ู ุจุง ฐ ุดุฑูุน ุดูุฏ." class="input input-bordered w-full input-primary border-gray-300" />
				      </div>

				      <!-- ุขุฏุฑุณ -->
				      <div class="form-control">
				        <label class="label">
				          <span class="label-text font-semibold mb-1">ุขุฏุฑุณ ฺฉุงูู</span>
				        </label>
				        <textarea name="address" class="textarea textarea-bordered w-full h-24 textarea-primary border-gray-300" placeholder="ุงุณุชุงูุ ุดูุฑุ ุฎุงุจุงูุ ูพูุงฺฉ..." required rows="3"></textarea>
				      </div>

				      <!-- ุชฺฉ ููุงูู -->
				      <div class="form-control">
				        <label class="cursor-pointer flex items-center gap-1">
				          <input type="checkbox" class="checkbox checkbox-primary text-[#e66700]" />
				          <span class="label-text text-sm">ุดุฑุงุท ู ููุงูู ุฎุฑุฏ ุงุฒ ุณุงุช ุฑุง ูโูพุฐุฑู.</span>

				        	<!-- ูุชู ุง ุฏฺฉููโุง ฺฉู Modal ุฑู ุจุงุฒ ูโฺฉูู -->
							<label for="my_modal" class="cursor-pointer text-sm text-[#e66700] hover:underline">
								(ูุทุงูุนู ููุงูู)
							</label>

							<!-- Modal -->
							<input type="checkbox" id="my_modal" class="modal-toggle" />
							<div class="modal" role="dialog">
							  <div class="modal-box">
							    <h3 class="font-bold text-lg text-[#e66700]"> ุดุฑุงุท ู ููุงูู </h3>
							    <p class="py-4">
							    	- ูุทูุง ุฏุฑ ูุงุฑุฏ ฺฉุฑุฏู ููุงุฏุฑ ุฎูุงุณุชู ุดุฏู ุงุนู ุงุฒ ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ู ุดูุงุฑู ุชููู ุฏูุช ูุงุฒู ุฑุง ุฏุงุดุชู ุจุงุดุฏ.
									<br/>
									- ุจุฑุง ูุงุฑุฏ ฺฉุฑุฏู ุขุฏุฑุณ ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ ุฏุฑ ุงุจุชุฏุง ุงุฒ ูุงู ุงุณุชุงู ู ุดูุฑ ุฎูุฏ ุงุณุชูุงุฏู ฺฉุฑุฏู ู ุณูพุณ ุขุฏุฑุณ ฺฉุงูู ุฑุง ูุงุฑุฏ ฺฉูุฏ.
									<br/>
									- ุฏุฑ ูุธุฑ ุฏุงุดุชู ุจุงุดุฏ ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ูุงุฑุฏ ุดุฏู ุจุงุฏ ุจุง ูุงู ุตุงุญุจ ฺฉุงุฑุช ูพุฑุฏุงุฎุช ฺฉููุฏู ู ุดูุงุฑู ุณู ฺฉุงุฑุช ูุงุฑุฏ ุดุฏู ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ.
									<br/>
									- ุจุนุฏ ุงุฒ ูุฑุญูู ููุง ู ูพุฑุฏุงุฎุช ูููู ฺฉุฏ ูพฺฏุฑ ุณูุงุฑุด ุจุฑุง ุดูุง ููุงุด ุฏุงุฏู ูุดูุฏ ฺฉู ูุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุขู  ุฏุฑ ุจุฎุด ูุฑุจูุทู ุฏุฑ ุณุงุช ู ุง ุจุง ุชูุงุณ ุจุง ฺฉุงุฑุดูุงุณุงู ูุฑุณ ุงุฒ ูุถุนุช ุณูุงุฑุด ุฎูุฏ ุขฺฏุงู ุดูุฏ.
							    </p>
							    <div class="modal-action">
							      <label for="my_modal" class="btn">ุจุณุชู</label>
							    </div>
							  </div>
							</div>

				        </label>
				        <p id="termsError" class="text-red-500 text-sm mt-1 hidden">ูุทูุงู ููุงูู ุฑุง ุจูพุฐุฑุฏ.</p>
				      </div>

				      <!-- ุฎูุงุตู ุณูุงุฑุด -->
				      <div class="divider my-6">ุฎูุงุตู ุณูุงุฑุด</div>
				      <div class="bg-base-200 rounded-xl p-4">
				        <div class="flex justify-between mb-2">
				          <span>ุฌูุน ฺฉู ูุญุตููุงุช</span>
				          <span class="font-semibold text-primary">{{ total }} ุชููุงู</span>
				        </div>
				        <div class="flex justify-between mb-2">
				          <span>ูุฒูู ุงุฑุณุงู</span>
				          <span class="font-semibold">ุฑุงฺฏุงู</span>
				        </div>
				        <div class="flex justify-between font-bold text-lg mt-2 border-t pt-3">
				          <span>ูุจูุบ ูุงุจู ูพุฑุฏุงุฎุช</span>
				          <span class="text-success">{{ total }} ุชููุงู</span>
				        </div>
				      </div>

				      <!-- ุฏฺฉูู ูพุฑุฏุงุฎุช -->
				      <button class="btn btn-primary w-full text-lg mt-4" type="submit">
				        ูพุฑุฏุงุฎุช ุขููุงู ๐ณ
				      </button>
				    </form>

				</div>
			</div>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
				  const nameInput = document.getElementById("full_name");
				  const phoneInput = document.getElementById("phone");
				  const termsCheckbox = document.getElementById("terms");
				  const termsError = document.getElementById("termsError");

				  // ููุท ุญุฑูู ูุฌุงุฒ ุจุฑุง ูุงู ู ูุงู ุฎุงููุงุฏฺฏ
				  nameInput.addEventListener("input", function() {
				    this.value = this.value.replace(/[^ุข-a-zA-Z\s]/g, "");
				  });

				  // ููุท ุนุฏุฏ ูุฌุงุฒ ุจุฑุง ุดูุงุฑู ุชูุงุณ
				  phoneInput.addEventListener("input", function() {
				    this.value = this.value.replace(/[^0-9]/g, "");
				    if (this.value.length > 11) {
				      this.value = this.value.slice(0, 11);
				    }
				  });

				  // ุงุนุชุจุงุฑุณูุฌ ููุง
				  document.getElementById("checkoutForm").addEventListener("submit", function(e) {
				    let valid = true;
				    const nameValue = nameInput.value.trim();
				    const phoneValue = phoneInput.value.trim();

				    // ฺฺฉ ฺฉุฑุฏู ูุงู
				    if (nameValue.length < 3) {
				      alert("ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุจุงุฏ ุญุฏุงูู ณ ุญุฑู ุจุงุดุฏ.");
				      valid = false;
				    }

				    // ฺฺฉ ฺฉุฑุฏู ุดูุงุฑู ุชูุงุณ
				    if (!/^0\d{10}$/.test(phoneValue)) {
				      alert("ุดูุงุฑู ุชููู ุจุงุฏ ฑฑ ุฑูู ู ุจุง ฐ ุดุฑูุน ุดูุฏ.");
				      valid = false;
				    }

				    // ฺฺฉ ฺฉุฑุฏู ุชฺฉ ููุงูู
				    if (!termsCheckbox.checked) {
				      termsError.classList.remove("hidden");
				      valid = false;
				    } else {
				      termsError.classList.add("hidden");
				    }

				    if (!valid) e.preventDefault();
				  });
				});
			</script>
		<!-- /MainContent -->
	{% endblock %}
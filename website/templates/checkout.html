{% extends 'master.html' %}
{% load static %}
{% block title %} ูุฑู ุฎุฑุฏ | {% endblock %}
{% load jalali_tags %}

	{% block content %}
		<div class="bg-base-200 min-h-screen flex items-center justify-center py-10">
		    <div class="card w-full max-w-3xl bg-base-100 shadow-2xl p-6">
		        <h2 class="flex text-2xl font-bold text-center mb-6 text-[#e66700]">
		            ุชฺฉูู ุงุทูุงุนุงุช ุณูุงุฑุด
		        </h2>

		        <form id="checkoutForm" method="post" novalidate>
				    {% csrf_token %}
				    
				    <!-- ูุงู ู ูุงู ุฎุงููุงุฏฺฏ -->
				    <div class="form-control mb-3">
				        <label class="label">
				            <span class="label-text font-semibold mb-1">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</span>
				        </label>
				        <input id="full_name" type="text" name="full_name" placeholder="ูุซูุงู: ุนู ุฑุถุง"
				               class="input input-bordered w-full input-primary border-gray-300" required />
				        <p id="nameError" class="text-error text-sm mt-1 hidden">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุจุงุฏ ุญุฏุงูู ณ ุญุฑู ุจุงุดุฏ.</p>
				    </div>

				    <!-- ุดูุงุฑู ุชููู -->
				    <div class="form-control mb-3">
				        <label class="label">
				            <span class="label-text font-semibold mb-1">ุดูุงุฑู ุชููู</span>
				        </label>
				        <input id="phone" type="tel" name="phone" placeholder="ูุซูุงู: 09123456789"
				               class="input input-bordered w-full input-primary border-gray-300" required />
				        <p id="phoneError" class="text-error text-sm mt-1 hidden">ุดูุงุฑู ุชููู ุจุงุฏ ฑฑ ุฑูู ู ุจุง ฐ ุดุฑูุน ุดูุฏ.</p>
				    </div>

				    <!-- ุขุฏุฑุณ -->
				    <div class="form-control mb-3">
				        <label class="label">
				            <span class="label-text font-semibold mb-1">ุขุฏุฑุณ ฺฉุงูู</span>
				        </label>
				        <textarea name="address" id="address" class="textarea textarea-bordered w-full h-24 textarea-primary border-gray-300"
				                  placeholder="ุงุณุชุงูุ ุดูุฑุ ุฎุงุจุงูุ ูพูุงฺฉ..." required></textarea>
				        <p id="addressError" class="text-error text-sm mt-1 hidden">ูุทูุงู ุขุฏุฑุณ ฺฉุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.</p>
				    </div>

				    <!-- ุชฺฉ ููุงูู -->
				    <div class="form-control mt-1">
				        <label class="cursor-pointer flex items-center gap-1">
				            <input id="terms" type="checkbox" name="accept_terms" class="checkbox checkbox-primary text-[#e66700]" />
				            <span class="label-text text-sm">ุดุฑุงุท ู ููุงูู ุฎุฑุฏ ุงุฒ ุณุงุช ุฑุง ูโูพุฐุฑู.</span>
				        </label>
				        <p id="termsError" class="text-error text-sm mt-1 hidden">ูุทูุงู ููุงูู ุฑุง ุจูพุฐุฑุฏ.</p>
				    </div>

				    <button type="submit" class="btn btn-primary w-full text-lg mt-4">ูพุฑุฏุงุฎุช ุขููุงู ๐ณ</button>
				</form>
			</div>
		</div>

				<script>
				document.addEventListener("DOMContentLoaded", function() {
				    const nameInput = document.getElementById("full_name");
				    const phoneInput = document.getElementById("phone");
				    const addressInput = document.getElementById("address");
				    const termsCheckbox = document.getElementById("terms");

				    const nameError = document.getElementById("nameError");
				    const phoneError = document.getElementById("phoneError");
				    const addressError = document.getElementById("addressError");
				    const termsError = document.getElementById("termsError");

				    nameInput.addEventListener("input", function() {
				        this.value = this.value.replace(/[^ุข-a-zA-Z\s]/g, "");
				        nameError.classList.add("hidden");
				    });

				    phoneInput.addEventListener("input", function() {
				        this.value = this.value.replace(/[^0-9]/g, "");
				        if (this.value.length > 11) this.value = this.value.slice(0, 11);
				        phoneError.classList.add("hidden");
				    });

				    addressInput.addEventListener("input", () => addressError.classList.add("hidden"));

				    document.getElementById("checkoutForm").addEventListener("submit", function(e) {
				        let valid = true;

				        if (nameInput.value.trim().length < 3) {
				            nameError.classList.remove("hidden");
				            valid = false;
				        }
				        if (!/^0\d{10}$/.test(phoneInput.value.trim())) {
				            phoneError.classList.remove("hidden");
				            valid = false;
				        }
				        if (addressInput.value.trim().length < 5) {
				            addressError.classList.remove("hidden");
				            valid = false;
				        }
				        if (!termsCheckbox.checked) {
				            termsError.classList.remove("hidden");
				            valid = false;
				        }

				        if (!valid) e.preventDefault();
				    });
				});
				</script>
	{% endblock %}
{% extends 'master.html' %}
{% load static %}
{% block title %} ูุฑู ุฎุฑุฏ | {% endblock %}
{% block og_title %} ูุฑู ุฎุฑุฏ | {% endblock %}

{% block description %}	ูุฑู ุฎุฑุฏ ุงุฒ ุณุงุช ูุฑุณ{% endblock %}
{% block og_description %}	ูุฑู ุฎุฑุฏ ุงุฒ ุณุงุช ูุฑุณ{% endblock %}

{% block metaimg %}{% static 'img/farris-icon-or.png' %}{% endblock %}
{% load humanize %}
{% load jalali_tags %}

	{% block content %}
		<div class="bg-base-200 min-h-screen flex items-center justify-center py-10">
		    <div class="card w-full max-w-3xl bg-base-100 shadow-2xl p-6">
		        <h2 class="flex text-2xl font-bold text-center mb-6 text-[#e66700]">
		        	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="26" height="26" fill="currentColor"><path d="M6.41421 15.89L16.5563 5.74785L15.1421 4.33363L5 14.4758V15.89H6.41421ZM7.24264 17.89H3V13.6473L14.435 2.21231C14.8256 1.82179 15.4587 1.82179 15.8492 2.21231L18.6777 5.04074C19.0682 5.43126 19.0682 6.06443 18.6777 6.45495L7.24264 17.89ZM3 19.89H21V21.89H3V19.89Z"></path></svg>
		            ุชฺฉูู ุงุทูุงุนุงุช ุณูุงุฑุด
		        </h2>

		        <form id="checkoutForm" method="post" novalidate>
				    {% csrf_token %}
				    
				    <!-- ูุงู ู ูุงู ุฎุงููุงุฏฺฏ -->
				    <div class="form-control mb-3">
				        <label class="label">
				            <span class="label-text font-semibold mb-1">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</span>
				        </label>
				        <input id="full_name" type="text" name="full_name" placeholder="ูุซูุงู: ุนู ุฑุถุง"
				               class="input input-bordered w-full input-primary border-gray-300" required />
				        <p id="nameError" class="text-error text-sm mt-1 hidden">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุจุงุฏ ุญุฏุงูู ณ ุญุฑู ุจุงุดุฏ.</p>
				    </div>

				    <!-- ุดูุงุฑู ุชููู -->
				    <div class="form-control mb-3">
				        <label class="label">
				            <span class="label-text font-semibold mb-1">ุดูุงุฑู ุชููู</span>
				        </label>
				        <input id="phone" type="tel" name="phone" placeholder="ูุซูุงู: 09123456789"
				               class="input input-bordered w-full input-primary border-gray-300" required />
				        <p id="phoneError" class="text-error text-sm mt-1 hidden">ุดูุงุฑู ุชููู ุจุงุฏ ฑฑ ุฑูู ู ุจุง ฐ ุดุฑูุน ุดูุฏ.</p>
				    </div>

				    <!-- ุขุฏุฑุณ -->
				    <div class="form-control mb-3">
				        <label class="label">
				            <span class="label-text font-semibold mb-1">ุขุฏุฑุณ ฺฉุงูู</span>
				        </label>
				        <textarea name="address" id="address" class="textarea textarea-bordered w-full h-24 textarea-primary border-gray-300"
				                  placeholder="ุงุณุชุงูุ ุดูุฑุ ุฎุงุจุงูุ ูพูุงฺฉ..." required></textarea>
				        <p id="addressError" class="text-error text-sm mt-1 hidden">ูุทูุงู ุขุฏุฑุณ ฺฉุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.</p>
				    </div>

				    <!-- ุชฺฉ ููุงูู -->
				    <div class="form-control mt-1">
				    	<label class="cursor-pointer flex items-center gap-1">
				    		<input id="terms" type="checkbox" name="accept_terms" class="checkbox checkbox-primary text-[#e66700]" required />
				    		<span class="label-text text-sm">ุดุฑุงุท ู ููุงูู ุฎุฑุฏ ุงุฒ ุณุงุช ุฑุง ูโูพุฐุฑู.</span>
				    		<label for="my_modal" class="cursor-pointer text-sm text-[#e66700] hover:underline">(ูุทุงูุนู ููุงูู)</label>
				    		<!-- Modal -->
				    		<input type="checkbox" id="my_modal" class="modal-toggle" />
				    		<div class="modal" role="dialog">
				    			<div class="modal-box">
					    			<h3 class="font-bold text-lg text-[#e66700]"> ุดุฑุงุท ู ููุงูู </h3>
					    			<p class="py-4"> - ูุทูุง ุฏุฑ ูุงุฑุฏ ฺฉุฑุฏู ููุงุฏุฑ ุฎูุงุณุชู ุดุฏู ุงุนู ุงุฒ ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ู ุดูุงุฑู ุชููู ุฏูุช ูุงุฒู ุฑุง ุฏุงุดุชู ุจุงุดุฏ. 
					    				<br/>
					    				 - ุจุฑุง ูุงุฑุฏ ฺฉุฑุฏู ุขุฏุฑุณ ุงุจุชุฏุง ุงุฒ ูุงู ุงุณุชุงู ู ุดูุฑ ุงุณุชูุงุฏู ฺฉุฑุฏู ู ุณูพุณ ุขุฏุฑุณ ฺฉุงูู ุฑุง ูุงุฑุฏ ฺฉูุฏ. 
					    				 <br/>
					    				  - ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ูุงุฑุฏ ุดุฏู ุจุงุฏ ุจุง ูุงู ุตุงุญุจ ฺฉุงุฑุช ูพุฑุฏุงุฎุช ฺฉููุฏู ู ุดูุงุฑู ุณู ฺฉุงุฑุช ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ. 
					    				  <br/>
					    				   - ุจุนุฏ ุงุฒ ูพุฑุฏุงุฎุช ููููุ ฺฉุฏ ูพฺฏุฑ ุณูุงุฑุด ุจุฑุง ุดูุง ููุงุด ุฏุงุฏู ูโุดูุฏ. 
					    			</p>
					    			<div class="modal-action">
					    				<label for="my_modal" class="btn">ุจุณุชู</label>
					    			</div>
				    			</div>
				    		</div>
				    	</label>
				    	<p id="termsError" class="text-red-500 text-sm mt-1 hidden">ูุทูุงู ููุงูู ุฑุง ุจูพุฐุฑุฏ.</p>
				    </div>

				    <!-- ุฎูุงุตู ุณูุงุฑุด -->
				    <div class="divider my-6">ุฎูุงุตู ุณูุงุฑุด</div>
				    <div class="bg-base-200 rounded-xl p-4">
				    	<div class="flex justify-between mb-2">
				    		<span>ุฌูุน ฺฉู ูุญุตููุงุช</span>
				    		<span class="font-semibold text-primary">{{ total|intcomma }} ุชููุงู</span>
				    	</div>
				    	<div class="flex justify-between mb-2">
				    		<span>ูุงูุงุช (ุณูู ุดูุง)</span>
				    		<span class="font-semibold">ฐ ุชููุงู</span>
				    	</div>
				    	<div class="flex justify-between font-bold text-lg mt-2 border-t pt-3">
				    		<span>ูุจูุบ ูุงุจู ูพุฑุฏุงุฎุช</span> <span class="text-success">{{ total|intcomma }} ุชููุงู</span>
				    	</div>
				    </div>

				    <button type="submit" class="btn btn-primary w-full text-lg mt-4">ูพุฑุฏุงุฎุช ุขููุงู ๐ณ</button>
				</form>
			</div>
		</div>

				<script>
				document.addEventListener("DOMContentLoaded", function() {
				    const nameInput = document.getElementById("full_name");
				    const phoneInput = document.getElementById("phone");
				    const addressInput = document.getElementById("address");
				    const termsCheckbox = document.getElementById("terms");

				    const nameError = document.getElementById("nameError");
				    const phoneError = document.getElementById("phoneError");
				    const addressError = document.getElementById("addressError");
				    const termsError = document.getElementById("termsError");

				    nameInput.addEventListener("input", function() {
				        this.value = this.value.replace(/[^ุข-a-zA-Z\s]/g, "");
				        nameError.classList.add("hidden");
				    });

				    phoneInput.addEventListener("input", function() {
				        this.value = this.value.replace(/[^0-9]/g, "");
				        if (this.value.length > 11) this.value = this.value.slice(0, 11);
				        phoneError.classList.add("hidden");
				    });

				    addressInput.addEventListener("input", () => addressError.classList.add("hidden"));

				    document.getElementById("checkoutForm").addEventListener("submit", function(e) {
				        let valid = true;

				        if (nameInput.value.trim().length < 3) {
				            nameError.classList.remove("hidden");
				            valid = false;
				        }
				        if (!/^0\d{10}$/.test(phoneInput.value.trim())) {
				            phoneError.classList.remove("hidden");
				            valid = false;
				        }
				        if (addressInput.value.trim().length < 5) {
				            addressError.classList.remove("hidden");
				            valid = false;
				        }
				        if (!termsCheckbox.checked) {
				            termsError.classList.remove("hidden");
				            valid = false;
				        }

				        if (!valid) e.preventDefault();
				    });
				});
				</script>
	{% endblock %}